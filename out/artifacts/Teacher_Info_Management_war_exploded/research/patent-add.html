<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>添加专利</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="../css/font.css">
		<link rel="stylesheet" href="../css/xadmin.css">
		<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
		<script type="text/javascript" src="../lib/layui/layui.js" charset="utf-8"></script>
		<script type="text/javascript" src="../js/xadmin.js" charset="utf-8"></script>
		<script type="text/javascript" src="../js/main.js" charset="utf-8"></script>

		<style type="text/css">
			.layui-form-label {
				width: 120px;
			}
		</style>

		<script>
			layui.use(['form', 'laydate'], function(){
				var form = layui.form
				,layer = layui.layer
				,laydate = layui.laydate;
					
				//日期
				laydate.render({
					elem: '#date',
					trigger: 'click' //自定义弹出框，采用click弹出
				});
				laydate.render({
					elem: '#date1',
					trigger: 'click' //自定义弹出框，采用click弹出
				});
	
				//监听提交 
				form.on('submit(add)', function(data) {
					console.log(data);
					//发异步，把数据提交给php
					layer.alert("增加成功", {
						icon: 6
					}, function() {
						// 获得frame索引
						var index = parent.layer.getFrameIndex(window.name);
						//关闭当前frame
						parent.layer.close(index);
					});
					return false;	
				});
				form.render()
			});
			
			define([], function(){
				var author_list = avalon.define({
				    $id: 'author_list',
				    //表单数组
				    form: [],
				    //添加表单
				    add_author: function(){
				        var con = {};
				        author_list.form.push(con);
				    },
				});
			});
		</script>

	</head>

	<body>
		<div class="layui-anim layui-anim-up" style="padding-left: 125px; padding-top: 35px;">

			<form class="layui-form">

				<!-- ---------------------------- 基本信息 ----------------------------- -->

				<fieldset class="layui-elem-field layui-field-title" style="width: 520px; border-color: #01AAED">
					<legend>基本信息</legend>
				</fieldset>

				<!-- 申请时间 -->
				<div class="layui-form-item">
					<div class="layui-inline">
						<label for="birthday" class="layui-form-label"><span class="x-red">*</span>申请时间</label>
						<div class="layui-input-inline">
							<input type="text" name="application_time" id="date" lay-verify="date" autocomplete="off" class="layui-input"
							 placeholder="yyyy-MM-dd">
						</div>
					</div>
				</div>

				<!-- 授权时间 -->
				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label"><span class="x-red">*</span>授权时间</label>
						<div class="layui-input-inline">
							<input type="text" name="authorization_time" id="date1" lay-verify="date" autocomplete="off" class="layui-input"
							 placeholder="yyyy-MM-dd">
						</div>
					</div>
				</div>

				<!-- 专利号 -->
				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label"><span class="x-red">*</span>专利号</label>
						<div class="layui-input-inline">
							<input id="patent_id" name="patent_id" lay-verify="required" autocomplete="off" class="layui-input" placeholder="请输入专利号">
						</div>
					</div>
				</div>

				<!-- 专利类型 -->
				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label"><span class="x-red">*</span>专利类型</label>
						<div class="layui-input-inline">
							<select name="patent_type" lay-verify="required">
								<option value="">请选择</option>
								<option value="1">发明</option>
								<option value="2">实用新型</option>
								<option value="3">外观设计</option>
							</select>
						</div>
					</div>
				</div>

				<!-- 专利级别 -->
				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label"><span class="x-red">*</span>专利级别</label>
						<div class="layui-input-inline">
							<select name="patent_level" lay-verify="required">
								<option value="">请选择</option>
								<option value="1">中国专利</option>
								<option value="2">国际专利</option>
							</select>
						</div>
					</div>
				</div>

				<!-- 专利名称 -->
				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label"><span class="x-red">*</span>专利名称</label>
						<div class="layui-input-inline">
							<input id="patent_name" name="patent_name" lay-verify="required" autocomplete="off" class="layui-input"
							 placeholder="请输入专利名称" style="width: 300px;">
						</div>
					</div>
				</div>


				<!-- ---------------------------- 发明人详情 ----------------------------- -->

				<div ms-controller="author_list">

					<fieldset class="layui-elem-field layui-field-title" style="width: 520px; border-color: mediumpurple">
						<legend>发明人详情</legend>
					</fieldset>

					<!-- 作者详情 -->
					<div class="layui-form-item">
						<div class="layui-inline">
							<label class="layui-form-label"><span class="x-red">*</span>发明人</label>
							<div class="layui-input-inline">
								<input id="author_name" name="author_name" lay-verify="required" autocomplete="off" class="layui-input" placeholder="发明人姓名"
								 style="width: 200px;">
							</div>
						</div>
						<button type="button" class="layui-btn" ms-click="add_author()" style="margin-left: 10px; margin-bottom: 3px; padding-left: 12px; padding-right: 9px;">
							<i class="layui-icon"></i>
						</button>
					</div>

					<!-- 重复 作者详情 -->
					<div style="overflow: hidden" ms-repeat="form">
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label"><span class="x-red">*</span>发明人</label>
								<div class="layui-input-inline">
									<input id="author_name" name="author_name" lay-verify="required" autocomplete="off" class="layui-input" placeholder="发明人姓名"
									 style="width: 200px;">
								</div>
							</div>
							<button type="button" class="layui-btn" ms-click="add_author()" style="margin-left: 10px; margin-bottom: 3px; padding-left: 12px; padding-right: 9px;"><i
								 class="layui-icon"></i></button>
							<button type="button" class="layui-btn  layui-btn-danger" ms-click="$remove" style="margin-bottom: 3px; padding-left: 11px; padding-right: 9px;"><i
								 class="layui-icon"></i></button>
						</div>
					</div>

				</div>

				
				<!-- ---------------------------- 提交表单 ----------------------------- -->
				
				<div class="layui-form-item" style="padding-left: 50px;">
					<label class="layui-form-label"></label>
					<div class="layui-input-block">
						<button class="layui-btn" lay-submit="" lay-filter="add" style="margin-right: 30px;">提交</button>
						<button type="reset" class="layui-btn layui-btn-primary">重置</button>
					</div>
				</div>

			</form>

		</div>
	</body>

</html>

<script>
	require(['index'], function(model) {
		avalon.scan();
	});
</script>
